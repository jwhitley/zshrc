# This generates a very minimal ~/.bash_profile which 
# exports a PATH environment variable equal to $PATH when
# this script is run.  Useful for apps which need a bash
# PATH setting.

create-bash-profile () {
  local profile="`cat <<EOT
#!/bin/bash
# autogenerated by create-bash-profile
# DO NOT EDIT -- changes will be overwritten
#
export PATH=$PATH

if [[ -d ~/.rbenv ]]; then
    eval \"\\$(rbenv init -)\"
elif [[ -s ~/.rvm/scripts/rvm ]]; then
    source ~/.rvm/scripts/rvm
fi
EOT`"

  if [[ -e ~/.bash_profile && -z `fgrep -s create-bash-profile ~/.bash_profile` ]]; then
    echo "~/.bash_profile not managed by create-bash-profile, please update it manually"
    return 0
  else 
    if [[ ! -e ~/.bash_profile || -w ~/.bash_profile ]]; then
      echo "$profile" > ~/.bash_profile
    else
      echo "Cannot write ~/.bash_profile"
    fi
  fi

  if [[ ! -e ~/.bashrc ]]; then
    (cd ~; ln -s .bash_profile .bashrc)
  fi

  if [[ ! -e ~/.profile ]]; then
    (cd ~; ln -s .bash_profile .profile)
  fi

}

# vim: set ft=zsh
